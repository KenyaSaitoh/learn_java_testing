<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>BookOrderPage</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<f:view>
  <h2>以下の内容で注文します</h2><hr />
  <h:form>
    <h:panelGrid border="0" columns="2">
      <%-- 顧客名 --%>
      <h:outputText value="顧客名" />
      <h:outputText value="#{customer.customerName} 様" />
      <%-- 注文内容 --%>
      <h:outputText value="注文内容" />
      <h:panelGroup>
        <h:dataTable value="#{cart.cartItems}" var="book" border="1">
          <h:column>
            <f:facet name="header"><h:outputText value="書籍名" /></f:facet>
            <h:outputText value="#{book.bookName}" />
          </h:column>
          <h:column>
            <f:facet name="header"><h:outputText value="金額" /></f:facet>
            <h:outputText value="#{book.price}">
              <f:convertNumber groupingUsed="true" />
            </h:outputText>
          </h:column>
          <h:column>
            <f:facet name="header"><h:outputText value="注文数" /></f:facet>
            <h:outputText value="#{book.count}" />
          </h:column>
        </h:dataTable>
      </h:panelGroup>
      <%-- 注文金額合計 --%>
      <h:outputText value="注文金額合計" />
      <h:outputText value="#{cart.totalPrice}">
        <f:convertNumber groupingUsed="true" />
      </h:outputText>
      <%-- 配送料金 --%>
      <h:outputText value="配送料金" />
      <h:outputText value="#{cart.deliveryPrice}">
        <f:convertNumber groupingUsed="true" />
      </h:outputText>
      <%-- 配送先住所 --%>
      <h:outputText value="配送先住所" />
      <h:panelGroup>
        <h:inputText id="deliveryAddress" value="#{cart.deliveryAddress}" 
          required="true" size="40">
          <f:validateLength maximum="40" />
        </h:inputText>
        <h:message for="deliveryAddress" errorStyle="color: red" />
      </h:panelGroup>
      <%-- 決済方法 --%>
      <h:outputText value="決済方法" />
      <h:panelGroup>
        <h:selectOneRadio id="settlementType" value="#{cart.settlementType}" 
          required="true">
          <f:selectItem itemValue="1" itemLabel="銀行振り込み" />
          <f:selectItem itemValue="2" itemLabel="着払い" />
        </h:selectOneRadio>
        <h:message for="settlementType" errorStyle="color: red" />
      </h:panelGroup>
    </h:panelGrid>
    <br />
    <h:commandLink action="#{bookOrder.order}" value="注文する" />
    <br /><br />
    <h:outputLink value="./BookSelectPage.jsp">
      <h:outputText value="買い物を続ける" />
    </h:outputLink>
  </h:form>
</f:view>
</body>
</html>